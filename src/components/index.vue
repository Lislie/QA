<style scoped lang="stylus" rel="stylesheet/stylus">
.content {
  width: 100%;
  height: 100%;
  min-width: 1024px;
  color: #fff;
  font-family: 'STYuanti-SC-Regular';
  margin 0
}

.index1 {
  width: 100%;
  // min-height 60px
  background: url('../assets/banner.png') no-repeat no-repeat;
  overflow: hidden;
  .line22{
    width:933px
    height:1px
    background url("../assets/line22.png") no-repeat no-repeat
    text-align: center;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
    top: -155px;

  }
  .title1 {
    text-align: center;
    padding-top: 70px;

    h2 {
      font-size: 50px;
      // padding-bottom 32px
    }

    .tp1 {
      padding-bottom: 24px;
      font-size: 36px;
    }

    .tp2 {
      padding-bottom: 93px;
      font-size: 22px;
    }

    .s1 {
      font-size: 36px;
      color: #f1c224;
      margin: 0 15px;
      text-align: center;
    }

    img {
      // padding-top 10px
      position: relative;
      top: 20px;
    }
  }

  .cont1 {
    text-align: left ;
    display: flex;
    justify-content: center;
    padding-bottom: 87px;
    overflow: hidden;

    li {
      display: flex;
      // text-align center
      margin-right: 62px;

      span {
        width: 66px;
        height: 66px;
        display: inline-block;
        margin-right: 21px;
      }

      p {
        font-size: 34px;
      }

      .p2 {
        padding-top: 15px;
        font-size: 18px;
      }

      .sp1 {
        background: url('../assets/dz.png') no-repeat no-repeat;
        background-size: 100%;
      }

      .sp2 {
        background: url('../assets/cy.png') no-repeat no-repeat;
        background-size: 100%;
      }

      .sp3 {
        background: url('../assets/wt.png') no-repeat no-repeat;
        background-size: 100%;
      }

      .sp4 {
        background: url('../assets/ls.png') no-repeat no-repeat;
        background-size: 100%;
      }
    }
  }

  .btn1 {
    text-align: center;
    margin: 0 auto;
    display: flex;
    width: 288px;
    height: 69px;
    background-color: red;
    margin-bottom: 86px;
    // overflow hidden
    color: #fefefe;
    font-size: 30px;
    font-family: 'PingFangSC-Regular';
    justify-content: center;
  }
}

.index2 {
  width: 100%;
  height: 870px;
  background-color: #fff;

  h2 {
    font-size: 36px;
    color: black;
    text-align: center;
    padding: 108px 0 103px 0;
    // position relative
  }

  .line {
    height: 13px;
    width: 1200px;
    background: url('../assets/jx.png') no-repeat;
    text-align: center;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
    top: -125px;
  }

  .benner {
    width: 100%;
    height: 400px;
    background-color: #dedede;
    // margin-top 62px
  }

  ul {
    display: flex;
    // text-align center
    margin: 0 auto;
    justify-content: center;
    position: relative;
    top: -450px;

    li {
      width: 348px;
      height: 501px;
      background-color: red;
      margin: 0 40px;

    }

    .l1 {
      background: url('../assets/zx.png') no-repeat;
      background-size: 100%;

      p {
        width: 100%;
        height: 60px;
        background-color: rgba(1, 0, 25, 0.78);
        text-align: center;
        font-size: 24px;
        position: relative;
        top: 380px;
      }
    }

    .l3 {
      background: url('../assets/lx.png') no-repeat;
      background-size: 100%;

      p {
        width: 100%;
        height: 60px;
        background-color: rgba(1, 0, 25, 0.78);
        text-align: center;
        line-height: 60px;
        font-size: 24px;
        position: relative;
        top: 380px;
      }
    }

    .l2 {
      background: url('../assets/123123.jpg') no-repeat;

      // background-size 150%
      .l2_cont {
        width 100%
        height: 100%
        margin: 105px 60px;
        position: relative
        left -60px
        top -105px
        background-color #2d2d2d
        opacity 0.8
        display flex
        flex-direction column

        h3 {
          font-size: 24px;
          padding 100px 50px 0
          margin-bottom: 30px;
          overflow hidden
        }

        p {
          font-size: 16px;
          margin-bottom: 40px;
          line-height: 30px;
          padding: 0 50px
        }
      }
    }
  }
}

.index3 {
  // display flex
  width: 100%;
  height: 729px;
  background: url('../assets/banner2.png') no-repeat;
  // background-size 100%
  overflow: hidden;
  color: #fff;

  // flex-direction column
  // text-align center
  h2 {
    font-size: 36px;
    text-align: center;
    margin: 108px 0 72px 0;
    // position relative
  }

  .line {
    height: 13px;
    width: 1200px;
    background: url('../assets/line2.png') no-repeat;
    text-align: center;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
    top: -100px;
    right: 8px
  }

  ul {
    display: flex;
    // text-align center
    margin: 0 auto;
    justify-content: center;

    li {
      width: 381px;
      height: 444px;
      border: 1px solid;
      margin: 0 75px;
      display: flex;
      flex-direction: column;
      text-align: center;
    }

    .l1 {

      img {
        display: block;
        width: 66px;
        height: 70px;
        /*background: url('../assets/sy.png') no-repeat;*/
        margin: 31px auto 18px;
      }

      h3 {
        font-size: 24px;
        margin-bottom: 68px;
      }

      p {
        line-height 25px
        font-size: 16px;
        margin: 0 25px 30px;
      }
    }

    .l2 {
      height: 351px;

      span {
        display: block;
        width: 66px;
        height: 70px;
        background: url('../assets/rw.png') no-repeat;
        margin: 31px auto 18px;
      }

      h3 {
        font-size: 24px;
        margin-bottom: 68px;
      }

      p {
        font-size: 16px;
        margin: 0 25px 50px;
      }
    }
  }
}

.index4 {
  // display flex
  width: 100%;
  height: 787px;
  overflow: hidden;
  color: black;
  background-color: #fff;

  // flex-direction column
  // text-align center
  h2 {
    font-size: 36px;
    text-align: center;
    margin: 108px 0 50px 0;
    // position relative
  }

  .line4 {
    height: 13px;
    width: 1200px;
    background: url('../assets/line3.png') no-repeat;
    text-align: center;
    margin: 0 auto;
    position: relative;
    overflow: hidden;
    top: -70px;
  }

  ul {
    display: flex;
    // margin: 0 auto;
    justify-content: center;
    height: 300p;

    .cent4 {
      width: 150px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    li {
      width: 200px;
      margin: 0 25px;
      font-size: 18px;
      position: relative;

      span {
        width: 78px;
        height: 78px;
        display: block;
        font-size: 30px;
        margin: 0 auto 45px;
      }

      p {
        line-height: 26px;
      }

      .sp {
        width: 12px;
        height: 22px;
        background: url('../assets/jt.png') no-repeat;
        background-size: 100%;
        float: right;
        position: absolute;
        top: 75px;
        right: 0;
      }

      .sp1 {
        background: url('../assets/zc2.png') no-repeat;
        background-size: 100%;
      }

      .sp2 {
        background: url('../assets/dj.png') no-repeat;
        background-size: 100%;
      }

      .sp3 {
        background: url('../assets/hd.png') no-repeat;
        background-size: 100%;
      }

      .sp4 {
        background: url('../assets/dd.png') no-repeat;
        background-size: 100%;
      }

      .sp5 {
        background: url('../assets/sy2.png') no-repeat;
        background-size: 100%;
      }
    }
  }

  .btn2 {
    text-align: center;
    margin: 122px auto;
    display: flex;
    width: 288px;
    height: 69px;
    background-color: red;
    margin-bottom: 86px;
    // overflow hidden
    color: #fefefe;
    font-size: 30px;
    font-family: 'PingFangSC-Regular';
    justify-content: center;
  }
  .frame_wrap {
    background rgba(0, 0, 0, 0.6)
    position fixed
    width 100%
    height 100%
    top 0
    left 0
    .transition-box {
      width 400px
      height 220px
      margin 0 auto
      margin-top 18%
      text-align center
      background #fff
      overflow hidden
      border-radius 8px
      .alert_p {
        color #0095F3
        font-size 20px
        margin-top 22%
        i {
          display inline-block
          width 35px
          height 40px
          background url("./timesgoing.png") no-repeat center
          background-size 100% 100%
          margin-right 10px
          vertical-align middle
          margin-top -5px
        }
      }
    }
  }
}
.dotting {
  display: inline-block; width: 10px; min-height: 2px;
  padding-right: 2px;
  border-left: 2px solid currentColor; border-right: 2px solid currentColor;
  background-color: currentColor; background-clip: content-box;
  box-sizing: border-box;
  -webkit-animation: dot 2s infinite step-start both;
  animation: dot 2s infinite step-start both;
}
.dotting:before { content: '...'; } /* IE8 */
.dotting::before { content: ''; }
:root .dotting { margin-left: 2px; padding-left: 2px; } /* IE9+ */

@-webkit-keyframes dot {
25% { border-color: transparent; background-color: transparent; }
50% { border-right-color: transparent; background-color: transparent; }
75% { border-right-color: transparent; }
}
@keyframes dot {
25% { border-color: transparent; background-color: transparent; }
50% { border-right-color: transparent; background-color: transparent; }
75% { border-right-color: transparent; }

}




</style>
<template>
  <div class="content">
    <div class="index1">
        <div class="title1">
          <h2>旅游问答回享计划</h2>
          <p class="tp1">回答旅游问题即可获得<span class="s1">现金<img src="../assets/baibaoixnagjizi.png" alt=""></span>收益</p>
          <p class="tp2">你的每一个问答都有可能帮助到无数出游者</p>
        </div>
      <div class="line22"></div>
      <ul class="cont1">
          <li>
            <span class="sp1"></span>
            <div>
              <p>¥{{totalMoney}}</p>
              <p class="p2">答主回享总额</p>
            </div>
          </li>
          <li>
            <span class="sp2"></span>
            <div>
              <p>{{totalUser}}</p>
              <p class="p2">参与答主</p>
            </div>
          </li>
          <li>
            <span class="sp3"></span>
            <div>
              <p>{{totalAnswer}}</p>
              <p class="p2">已回答问题</p>
            </div>
          </li>
          <li>
            <span class="sp4"></span>
            <div>
              <p>82768</p>
              <p class="p2">历史帮助游客</p>
            </div>

          </li>
        </ul>
        <el-button  type="danger" class="btn1" @click="myQuen">立即答题</el-button>
    </div>
    <div class="index2">
      <h2>答主是谁</h2>
      <div class="line"></div>
      <div class="benner"></div>
      <ul>
        <li class="l1">
          <p>
            在校大学生
          </p>
        </li>
        <li class="l2">
          <div class="l2_cont">
            <h3>职场小生</h3>
            <p>1.善于利用互联网搜索想要的答案，噼里啪啦键盘侠。</p>
            <p>2.有精力、有活力，愿意和一群小伙伴儿一起参与网上发布的各种有趣活动。</p>
          </div>
        </li>
        <li class="l3">
          <p>旅行爱好者</p>
        </li>
      </ul>
    </div>
    <div class="index3">
      <h2>答主收益及义务</h2>
      <div class="line"></div>
      <ul>
        <li class="l1">
          <img src="../assets/sy.png" alt="">
          <h3>答主收益</h3>
          <p>1.通过答题赚到实实在在的现金钞票~,支持随时提现。</p>
          <p>2.在回答各种旅游问题的同时，学习很多的相关知识,赚钱学习两不误。</p>
          <p>3.帮助更多爱好旅行的人,让更多的人认识你~</p>
        </li>
        <li class="l2">
          <span></span>
          <h3>答主义务</h3>
          <p>1.认真回答每一个问题。</p>
          <p>2.回答更多平台的问题~</p>
        </li>
      </ul>
    </div>
    <div class="index4">
      <h2>我该如何做</h2>
      <div class="line4"></div>
      <ul>
        <li>
          <div class="cent4">
            <span class="sp1"></span>
            <p>免费注册并登录问答账号</p>
          </div>
          <span class="sp"></span>
        </li>
        <li>
          <div class="cent4">
            <span class="sp2"></span>
            <p>点击"立即答题"获取问题</p>
          </div>
          <span class="sp"></span>
        </li>
        <li>
          <div class="cent4">
            <span class="sp3"></span>
            <p>拿到问题后，认真回答问题。</p>
            <p>答案可依据自己的旅行经验,或者旅游网站、搜索引擎进行获取</p>
          </div>
          <span class="sp"></span>

        </li>
        <li>
          <div class="cent4">
            <span class="sp4"></span>
            <p>提交自己的回答,等待平台审核。</p>
            <p>问题可以点击"下一题"进行持续作答，实在找不到答案的可以跳过~</p>
          </div>
          <span class="sp"></span>
        </li>
        <li>
          <div class="cent4">
            <span class="sp5"></span>
            <p>审核通过，获得收益。可随时提现</p>
          </div>
        </li>
      </ul>
      <el-button  type="danger" class="btn2" @click="myQuen">立即答题</el-button>
      <div class='frame_wrap' v-show="framShow">
        <transition name="el-fade-in">
          <div v-show="framShow" class="transition-box"><p class='alert_p'><i></i>系统正在为您分配问题<span class="dotting"></span>
          </p></div>
        </transition>
      </div>
      <!--<el-button :plain="true" @click="open4"></el-button>-->

    </div>

  </div>
</template>
<script>
import IndexService from '../api/indexServer'

export default {
  data() {
    return {
      totalUser: '',
      totalMoney: '',
      totalAnswer: '',
      framShow:false
    }
  },
  // beforeRouteLeave (to, from, next) {
  //   console.log(to,from)
  //   if(to.name = 'question'){
  //     this.que = false
  //   }
  //   // 在当前路由改变，但是该组件被复用时调用
  //   // 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，
  //   // 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。
  //   // 可以访问组件实例 `this`
  //   next()
  // },
  mounted() {
    this.$indexServer.headData()
      .then((res) => {
        console.log(res)
        if (res.data.code === 200) {
          let data = res.data.data
          this.totalAnswer = data.totalAnswer
          this.totalMoney = data.totalMoney
          this.totalUser = data.totalUser
          console.log(this.totalAnswer, this.totalUser)
        }
        // if(res.data.code === 400){
        //   this.open4()
        //   this.$router.push({ name: 'Login' });
        //   this.que = true
        //
        //
        // }
      })
  },
  methods: {
    open4(){
      this.$message({
        message: '登录超时，请重新登录！',
        type: 'warning'
      });
    },
    myQuen() {
      if (this.getCookie('nickname')&&this.getCookie('headUrl')) {
        this.framShow = true
        this.$emit('que',false)

        this.$indexServer.reset()
          .then((res) => {
            console.log(res.data)
            if(res.data.code === 400){
              this.open4()
              this.$router.push({ name: 'Login' });
              // this.que = true
              this.$emit('Login',false)
            } else {
              setTimeout(() => {
                this.framShow = false
                this.$router.push('/quesTion')
                localStorage.setItem("qu", true);
              }, 1000)
            }
          })
      } else {
        this.$emit('que',true)

        this.framShow = false
        this.$message({
          message: '请先登录再进行答题',
          type: 'warning'
        });
        this.$router.push('/Login')

      }
    },
    // 获取cookie
    getCookie(name){
      var reg = RegExp(name+'=([^;]+)');
      var arr = document.cookie.match(reg);
      if(arr){
        return arr[1];
      }else{
        return '';
      }
    }
  }
}
</script>
